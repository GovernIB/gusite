<!DOCTYPE html>
<!--

-->
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout">
<head>

<!--  Este .css se usa para que en estático aparezca lo más parecido posible a la versión dinámica.
Al ejecutarse dinámicamente, se eliminará automáticamente el .css -->
<link rel="stylesheet" type="text/css" media="all"
	href="../resources/css/estils.css"
	th:href="@{../resources/css/estils.css}" th:remove="all"></link>
</head>
<body>
	<div th:fragment="encuestaHTMLParseada" th:remove="tag">
		<!-- u91856 02/03/2012 Salvador Antich: Identificacion del usuario que contesta segun configuracion de la encuesta -->
		<div th:if="${MVS_encuesta.identificacion}=='S'" th:remove="tag"
			th:text="${MVS_identificacion}"></div>
		<br /> <br />
		<div
			th:if="(${MVS_encuesta.visible}=='S') and (${MVS_Fechas_vigente}==true)"
			th:remove="tag">
			<form name="encuesta"
				th:action="@{${#gusuri.envioencuesta(MVS_microsite,MVS_idioma,MVS_encuesta)}}"
				method="post" id="encuesta">
				<input type="hidden" name="idsite"
					th:value="${MVS_home_idmicrosite}"></input> <input type="hidden"
					name="lang" th:value="${#strings.toLowerCase(MVS_idioma)}"></input>
				<input type="hidden" name="cont" th:value="${MVS_encuesta.id}"></input>
				<input type="hidden" name="enccomp" value="yes"></input>
				<script th:inline="javascript">
				/*<![CDATA[*/        
				function comptaChecks(pregunta){ 
					 var num=0; 
					 for (i=0; i<document.encuesta[pregunta].length; i++){ 
					 	if (document.encuesta[pregunta][i].checked==true) 
					 		num++; 
					 }
					 return num;  
				 } 
				
				 function marcaCheck(idResp, idChk){
					 
					 if (document.encuesta["T" + idResp + '_' + idChk].value.length==0) {
					 	document.getElementById(idResp + '_' + idChk).checked = false;
					 }else{
					 	document.getElementById(idResp + '_' + idChk).checked = true;
				   }
				}
				 
				function getChecked(radioObj) {
					 if(!radioObj) {
						 return false;
					 }
					 var radioLength = radioObj.length;
					 if(radioLength == undefined){
				   	if(radioObj.checked){
				   		return true;
				   	}
						else{
							false; 
				   	}	
				   	}
					for(var i = 0; i < radioLength; i++) {
						if(radioObj[i].checked) return true;
					 } 
					 return false;
				} 
				 /*]]>*/
				</script>

				<div th:if="${#arrays.isEmpty(MVS_encuesta.preguntas)}==true"
					th:remove="tag">
					<script th:inline="javascript" th:fragment="SubmitValidaEncuesta">
						/*<![CDATA[*/
						  function validaencuesta(){
								var txtError="";
	    					 if (txtError == "") { 
	    						 document.encuesta.submit(); 
	    						 } else { 
	    						 alert("Alguna de les respostes no compleixen amb les condicions d'enviament:" + txtError); } }
						 /*]]>*/
					</script>
					<div id="botoneraCom">
						<label>
							<input type="button"
							th:onclick="'validaencuesta();'"
							name="btnanar" th:value="#{encuesta.enviar}" />
						</label>
					</div>
				</div>
				<div th:if="${#arrays.isEmpty(MVS_encuesta.preguntas)}==false"
					th:remove="tag">
					<div th:each="pregunta, iterStat: ${MVS_encuesta.preguntas}"
						th:with="indicePregunta=${iterStat.last}, indiceOrden=${iterStat.index}"
						th:remove="tag">
						<div th:with="obligatoriedad=''" th:remove="tag">
							<div
								th:if="(${pregunta.visible}=='S') and (${pregunta.visiblecmp=='S'})"
								th:remove="tag">
								<div
									th:with="max=${pregunta.maxContestadas} !=null ? ${pregunta.maxContestadas} : 0"
									th:remove="tag">
									<div
										th:with="min=${pregunta.minContestadas} !=null ? ${pregunta.minContestadas} : 0"
										th:remove="tag">
										<div th:if="'S'==${pregunta.multiresp}" th:remove="tag">
											<div th:if="(${min}!=0) and (${max}!=0)" th:remove="tag">
												<div th:with="obligatoriedad=#{encuesta.respcont.minmax}"
													th:remove="tag">
													<div
														th:with="obligatoriedad=${#strings.replace(obligatoriedad,'{2}',max)},obligatoriedad=${#strings.replace(obligatoriedad,'{1}',min)}"
														th:remove="tag">
														<!-- pruebas -->
														<div id="enquestaPreguntaCom"
															th:fragment="encuestaPregunta">
															<div th:remove="tag">
																<div
																	th:each="preguntaTraduccion: ${pregunta.traducciones}"
																	th:remove="tag">															
																	<h3
																		th:if="${preguntaTraduccion.key}==${#strings.toLowerCase(MVS_idioma)}"
																		th:text="(${preguntaTraduccion.key}!=null) ? (${preguntaTraduccion.value.titulo} + ' ' + ${obligatoriedad}) : '&nbsp;'"
																		th:remove="(${preguntaTraduccion.value.titulo}!=null) ? 'none' : 'all'"></h3>
																</div>
															</div>
															<div th:if="${pregunta.imagen}!=null" th:remove="tag">
																<p>
																	<img
																		th:src="@{${#gusuri.archivopub(MVS_microsite,pregunta.imagen)}}"
																		alt="" />
																</p>
															</div>
															<ul th:fragment="ListadoPreguntas">
																<li
																	th:with="scriptRadioDisabled = '', scriptTxtDisabled = '', checked = '', disabledTxt = '', disabledChk = '', disabledRadio = ''"
																	th:remove="tag">
																	<div th:each="respuesta: ${pregunta.respuestas}"
																		th:remove="tag">
																		<ul th:remove="tag">
																			<li><label> 
																			<span th:if="${MVS_mapRespostesFixades}!=null"
																					th:remove="tag"> <span
																						th:if="${#maps.containsKey(MVS_mapRespostesFixades, respuesta.id)}==true"
																						th:remove="tag"> <span th:remove="tag">
																								<span
																								th:with="checked ='checked', disabledTxt ='readonly', disabledChk ='disabled', disabledRadio ='disabled', compId=(${respuesta.id} + '_' + ${pregunta.id})"
																								th:remove="tag"> <span
																									th:fragment="MapParamVariables" th:remove="tag">
																										<span th:if="${pregunta.multiresp}=='S'"
																										th:remove="tag"> <span
																											th:if="${respuesta.tipo}=='I'"
																											th:remove="tag"> <span
																												th:with="disabledChk ='disabled'"
																												th:remove="tag"> <input
																													type="checkbox" th:id="${compId}"
																													th:name="'C' + ${pregunta.id}"
																													th:value="${respuesta.id}"
																													th:checked="${checked}=='checked'"
																													th:disabled="${disabledChk}=='disabled'" />
																											</span>
																										</span> <span th:unless="${respuesta.tipo}=='I'"
																											th:remove="tag"> <input
																												type="checkbox" th:id="${compId}"
																												th:name="'C' + ${pregunta.id}"
																												th:value="${respuesta.id}"
																												th:checked="${checked}=='checked'"
																												th:disabled="${disabledChk}=='disabled'" />
																										</span>
																									</span> <span th:unless="${pregunta.multiresp}=='S'"
																										th:remove="tag"> <input type="radio"
																											th:id="${compId}"
																											th:name="'R' + ${pregunta.id}"
																											th:value="${respuesta.id}"
																											th:checked="${checked}=='checked'" />
																									</span> <span
																										th:each="respuestaTraduccion : ${respuesta.traducciones}"
																										th:remove="tag"> <span
																											th:if="${respuestaTraduccion.key}==${#strings.toLowerCase(MVS_idioma)}"
																											th:text="(${respuestaTraduccion.key}!=null) ? (${respuestaTraduccion.value.titulo}) : '&nbsp;'"
																											th:remove="(${respuestaTraduccion.value.titulo}!=null) ? 'tag' : 'all'"></span>
																									</span> <span th:if="${respuesta.tipo}=='I'"
																										th:remove="tag"> <br /> <textarea
																												COLS="120" ROWS="2"
																												th:onkeyup="'marcaCheck(\'' + ${respuesta.id} +  '\' , \'' + ${pregunta.id} +  '\');'"
																												th:name="'T' + ${respuesta.id} + '_' + ${pregunta.id}"
																												th:readonly="${disabledTxt}=='readonly'"></textarea>
																											<!-- comprobar si funciona --> <span
																											th:if="${MVS_mapRespostesFixades}!=null"
																											th:remove="tag"> <span
																												th:if="${#maps.containsKey(MVS_mapRespostesFixades, respuesta.id)}==true"
																												th:remove="tag"> <script
																														th:inline="javascript">
																																/*<![CDATA[*/
																																    var idRespuesta=/*[[${respuesta.id}]]*/;
																																	var idPregunta=/*[[${pregunta.id}]]*/;																																											
																																    document.getElementById('encuesta')['T' + idRespuesta + "_" + idPregunta + ].value=idRespuesta; 
																																/*]]>*/
																																</script>
																											</span>
																										</span>
																									</span> <span th:if="''!=${disabledRadio}"
																										th:remove="tag"> <script
																												th:inline="javascript">
																												/*<![CDATA[*/																													
																												    var preguntaMultiresp=/*[[${pregunta.multiresp}]]*/;
																													var respTipo=/*[[${respuesta.tipo}]]*/;
																													var idComp=/*[[${compId}]]*/;
																													var idRespuesta=/*[[${respuesta.id}]]*/;
																													var idPregunta=/*[[${pregunta.id}]]*/;
																													
																												    if(preguntaMultiresp!="S"){	
																												    	document.getElementById(idComp).disabled=true;	
																												    }
																												    
																												    if(respTipo=="I"){
																												    	document.encuesta['T'  + idRespuesta + "_" + idPregunta].readonly=true;	
																												    }
																												  /*]]>*/
																													</script>
																									</span>
																								</span>
																							</span>
																						</span>
																					</span> 
																					<span
																						th:if="${#maps.containsKey(MVS_mapRespostesFixades, respuesta.id)}!=true"
																						th:remove="tag"> <span
																							th:with="compId=(${respuesta.id} + '_' + ${pregunta.id})"
																							th:remove="tag"> <span
																								th:replace="encuesta/encuestaparseada :: MapParamVariables"
																								th:remove="tag"></span>
																						</span>
																					</span>
																				</span>
																			</label></li>
																		</ul>
																	</div>
																</li>
															</ul>
														</div>
														<!-- hasta aqui pruebas -->
													</div>
												</div>
											</div>
												<div th:if="(${min}!=0) and (${max}==0)" th:remove="tag">												
												<div th:with="obligatoriedad=#{encuesta.respcont.min}"
													th:remove="tag">
													<div
														th:with="obligatoriedad=${#strings.replace(obligatoriedad,'{1}',min)}"
														th:remove="tag">
														<div
															th:replace="encuesta/encuestaparseada :: encuestaPregunta"
															th:remove="tag"></div>
													</div>
												</div>
											</div>											
											<div th:if="(${max}!=0) and (${min}==0)" th:remove="tag">												
												<div th:with="obligatoriedad=#{encuesta.respcont.max}"
													th:remove="tag">
													<div
														th:with="obligatoriedad=${#strings.replace(obligatoriedad,'{1}',max)}"
														th:remove="tag">
														<div
															th:replace="encuesta/encuestaparseada :: encuestaPregunta"
															th:remove="tag"></div>
													</div>
												</div>
											</div>
											<div th:if="(${min}==0) and (${max}==0)" th:remove="tag">												
												<div
													th:replace="encuesta/encuestaparseada :: encuestaPregunta"
													th:remove="tag"></div>
											</div>
										</div>
										<div th:unless="'S'==${pregunta.multiresp}" th:remove="tag">
											<div th:if="(${min}==1)" th:remove="tag">
												<div th:with="obligatoriedad=#{encuesta.obligatoria}"
													th:remove="tag">
													<div
														th:replace="encuesta/encuestaparseada :: encuestaPregunta"
														th:remove="tag"></div>
												</div>
											</div>
											<div th:unless="(${min}==1)" th:remove="tag">
												<div
													th:replace="encuesta/encuestaparseada :: encuestaPregunta"
													th:remove="tag"></div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- TEST BOTONES -->
					<div th:each="pregunta, iterStat: ${MVS_encuesta.preguntas}"
						th:with="indiceUltimo=${iterStat.last}, indiceOrden=${iterStat.index}, indicePrimero=${iterStat.first}, indiceTamano=${iterStat.size}"
						th:remove="tag">
						<div th:with="obligatoriedad=''" th:remove="tag">
							<div
								th:if="(${pregunta.visible}=='S') and (${pregunta.visiblecmp=='S'})"
								th:remove="tag">
								<div
									th:with="max=${pregunta.maxContestadas} !=null ? ${pregunta.maxContestadas} : 0"
									th:remove="tag">
									<div
										th:with="min=${pregunta.minContestadas} !=null ? ${pregunta.minContestadas} : 0"
										th:remove="tag">
										<div th:if="'S'==${pregunta.multiresp}" th:remove="tag">
											<div th:if="(${min}!=0) and (${max}!=0)" th:remove="tag">
												<div th:with="obligatoriedad=#{encuesta.respcont.minmax}"
													th:remove="tag">
													<div
														th:with="obligatoriedad=${#strings.replace(obligatoriedad,'{2}',max)},obligatoriedad=${#strings.replace(obligatoriedad,'{1}',min)}"
														th:remove="tag">
														<div id="enquestaPreguntaCom">
															<div th:remove="tag">
																<div
																	th:each="preguntaTraduccion, iterPreg: ${pregunta.traducciones}" th:with="indiPreg=${iterPreg.last}, PregTamano=${iterPreg.size}"
																	th:remove="tag">																
																	 <script th:inline="javascript" th:if="${indiPreg}==true"
																		th:fragment="ScriptBotonValida"
																		th:remove="(${preguntaTraduccion.value.titulo}!=null) ? 'none' : 'all'">
																/*<![CDATA[*/
																    var valor=false;
																    var txtError = "";
																    var saltoLinea="\n";
				 												 	var respuestaErrores=/*[[#{encuesta.condiciones}]]*/;
				 												 	var tamanoPregunta=/*[[${PregTamano}]]*/;
																    
																  function validaencuesta(maxim,minim,idPregunta,traducPregunta,titPregunta,preguntaMultiresp){
					 												
																	if (preguntaMultiresp=="S"){
																	if (minim!=0 && maxim!=0){
																    if((comptaChecks("C" + idPregunta)>maxim) || (comptaChecks("C" + idPregunta)<minim)){
																    	
																    	var resultado="";
																    	
																    	if(traducPregunta!=null){
																    		
																    		resultado=titPregunta;
																    																	    		
																    	}
																    	else{
																    		resultado="Error en traduccion";
																    	}
																    	
																	  txtError = txtError + saltoLinea + resultado;  															    	
																	  
																    }
																	}
																    else if (minim!=0){
																    	
																    	if(comptaChecks("C" + idPregunta)<minim){
																    	
																			var resultado="";
																    	
																    	if(traducPregunta!=null){
																    		
																    		resultado=titPregunta;
																    																	    		
																    	}
																    	else{
																    		resultado="Error en traduccion";
																    	}
																    	
																    	txtError = txtError + saltoLinea + resultado;  
																    																		 
																    }
																	}
																    else if (maxim!=0){
																     if(comptaChecks("C" + idPregunta)>maxim){
																    																	    	
																		var resultado="";
															    	
															    	if(traducPregunta!=null){
															    		
															    		resultado=titPregunta;															    	
															    		
															    	}
															    	else{
															    		resultado="Error en traduccion";
															    	}
															    	
															    	txtError = txtError + saltoLinea + resultado; 																    
															    }
																}
																}    																    
																    if (preguntaMultiresp!="S"){
																    if(minim==1){
											    					 if(!getChecked(document.encuesta["R" + idPregunta])){											    						 
											    						var resultado="";																    	
																	    if(traducPregunta!=null){
																	    		
																	    	resultado=titPregunta;	
																	    }
																	    else{
																	    	resultado="Error en traduccion";
																	    }
																	    
																	    txtError = txtError + saltoLinea + resultado;  
																    }
											    					 
																	}
																}											    					 
											    					  if (txtError == "") { 
											    						//document.encuesta.submit();
											    						//alert("Está comentado el submit de la función, por eso no se envia");
											    						valor=true;									    						
											    						
											    						 } else {
											    							 
											    						 //alert(respuestaErrores+" "+ txtError);
											    							
											    						 valor=false;
											    						 } 
											    					  
					 													//alert("error: "+txtError+", max: "+maxim+", min: "+minim+", Pregunta: "+idPregunta+", Traduce: "+traducPregunta+", tituloPregunta: "+titPregunta+", Multirespuesta: "+preguntaMultiresp);
					 																		 												
																}
																 /*]]>*/
															</script>																	
																</div>
															</div>
															<!-- EN PRUEBAS, VIGILAR CUANDO HAYA MAS DE UNA PREGUNTA CON RESPUESTA
															OBLIGATORIA -->
															<div id="botoneraCom"
																th:fragment="botonEnvio">
																<div
																	th:each="preguntaTraduccion, iterValida: ${pregunta.traducciones}" th:with="tamanoValida=${iterValida.size}, indicePregun=${iterValida.count}"
																	th:remove="tag">
																	<label
																		th:if="${preguntaTraduccion.key}==${#strings.toLowerCase(MVS_idioma)}">
																		<input class="validaBoton removeBoton" th:id="${pregunta.id}" type="button"
																		th:onclick="'validaencuesta(\'' + ${max} +  '\' , \'' + ${min} +  '\', \'' + ${pregunta.id} +  '\', \'' + ${preguntaTraduccion.key} +  '\', \'' + ${preguntaTraduccion.value.titulo} +  '\', \'' + ${pregunta.multiresp} +  '\');'"
																		name="btnanar" th:value="#{encuesta.enviar}" />																																				
																		<script th:inline="javascript">
																/*<![CDATA[*/
																  var contador=/*[[${indiceOrden}]]*/;
																  var idPregunta=/*[[${pregunta.id}]]*/;
																  var contadorObliga=0;
																  var tamano=/*[[${indiceTamano}]]*/;
																  var tamanoPreguntas=/*[[${tamanoValida}]]*/;
																  var indicePreg=/*[[${indicePregun}]]*/;
																  var arrayValidaciones = [];
																  var arrayLleno=false;
																  var cont=0;
																 
																  
																  if(/*[[${obligatoriedad}]]*/!=''){
																 	  jQuery('#'+idPregunta).removeClass("removeBoton").addClass("addBoton");
																 	 ejecutarValidacion();
																 	 contadorObliga=contadorObliga+1;
																  }else {
																	 
																	   var valor=true;
																	 if(contador==tamano-1){
																		  if((jQuery('.addBoton').length)==0){
																			 jQuery('#'+idPregunta).removeClass("removeBoton").addClass("addBoton");
																																						 
																	} 
																  }
																  }
																   if((jQuery('.addBoton').length)>1){
																	  if(contadorObliga==1){
																		  jQuery('#'+idPregunta).removeClass("addBoton").addClass("removeBoton");
																	  }
																  }																  																   
																   																   
																   function ejecutarValidacion(){
																	   var preguntaBoton=jQuery('#'+idPregunta);
																	   var atributoOnclick = jQuery(preguntaBoton).attr('onclick');
																	   
																	   if(atributoOnclick!=""){
																		   for(var i=0; i<1;i++){
																			   arrayValidaciones.push(atributoOnclick);
																		   }  
																	   }
																	   
																   }																   
																   var arrayResultadoValidar = [];
																   var newclick = new Function("cont=cont+1;" +arrayValidaciones+ "function llenaArray(valor){if(arrayResultadoValidar!=null){arrayResultadoValidar = [];} for(var i=0; i<1;i++){arrayResultadoValidar.push(valor);}} llenaArray(valor); if(cont%(indicePreg-1)==0){if((jQuery.inArray(false, arrayResultadoValidar))!=-1){if(cont%(indicePreg-1)==0){if(txtError!=''){alert(respuestaErrores+ ' '+ txtError); txtError='';}}} else{document.encuesta.submit();}}");																	  
																   
																   
																   jQuery('.validaBoton').attr('onclick','').click(newclick);
																  															   
																  /*]]>*/
															</script>																			
																	</label>
																</div>
															</div>																												
															<!-- EN PRUEBAS, HASTA AQUI -->
														</div>
													</div>
												</div>
											</div>										
										<div th:if="(${min}!=0) and (${max}==0)" th:remove="tag">											
											<div th:with="obligatoriedad=#{encuesta.respcont.min}"
												th:remove="tag">
												<div
													th:with="obligatoriedad=${#strings.replace(obligatoriedad,'{1}',min)}"
													th:remove="tag">
													<div th:replace="encuesta/encuestaparseada :: botonEnvio"
														th:remove="tag"></div>
												</div>
											</div>
										</div>
										<div th:if="(${max}!=0) and (${min}==0)" th:remove="tag">
											<div th:with="obligatoriedad=#{encuesta.respcont.max}"
												th:remove="tag">
												<div
													th:with="obligatoriedad=${#strings.replace(obligatoriedad,'{1}',max)}"
													th:remove="tag">
													<div th:replace="encuesta/encuestaparseada :: botonEnvio"
														th:remove="tag"></div>
												</div>
											</div>
										</div>
										<div th:if="(${min}==0) and (${max}==0)" th:remove="tag">
											<div th:each="preguntaTraduccion, iterPreg: ${pregunta.traducciones}" th:with="indiPreg=${iterPreg.first}, PregTamano=${iterPreg.size}"
												th:remove="tag">																	
																	 <script th:inline="javascript"
																		th:fragment="ScriptBotonValidaUnaOpcion"
																		th:remove="(${preguntaTraduccion.value.titulo}!=null) ? 'none' : 'all'">
																/*<![CDATA[*/
																    var valor=false;
																    var txtError = "";
																    var saltoLinea="\n";
				 												 	var respuestaErrores=/*[[#{encuesta.condiciones}]]*/;
				 												 	var tamanoPregunta=/*[[${PregTamano}]]*/;
																    
																  function validaencuesta(maxim,minim,idPregunta,traducPregunta,titPregunta,preguntaMultiresp){
					 												
																	if (preguntaMultiresp=="S"){
																	if (minim!=0 && maxim!=0){
																    if((comptaChecks("C" + idPregunta)>maxim) || (comptaChecks("C" + idPregunta)<minim)){
																    	
																    	var resultado="";
																    	
																    	if(traducPregunta!=null){
																    		
																    		resultado=titPregunta;
																    																	    		
																    	}
																    	else{
																    		resultado="Error en traduccion";
																    	}
																    	
																	  txtError = txtError + saltoLinea + resultado;  
																    																		  
																    }
																	}
																    else if (minim!=0){
																    	
																    	if(comptaChecks("C" + idPregunta)<minim){
																    	
																			var resultado="";
																    	
																    	if(traducPregunta!=null){
																    		
																    		resultado=titPregunta;
																    			
																    	}
																    	else{
																    		resultado="Error en traduccion";
																    	}
																    	
																    	txtError = txtError + saltoLinea + resultado;  
																    																		 
																    }
																	}
																    else if (maxim!=0){
																     if(comptaChecks("C" + idPregunta)>maxim){																    	
																    	
																		var resultado="";
															    	
															    	if(traducPregunta!=null){
															    		
															    		resultado=titPregunta;
															    																    		
															    	}
															    	else{
															    		resultado="Error en traduccion";
															    	}															    	
															    	txtError = txtError + saltoLinea + resultado; 																    
															    }
																}
																}        
																    if (preguntaMultiresp!="S"){
																    if(minim==1){
											    					 if(!getChecked(document.encuesta["R" + idPregunta])){											    						 
											    						var resultado="";
																	    	
																	    if(traducPregunta!=null){
																	    		
																	    	resultado=titPregunta;	
																	    }
																	    else{
																	    	resultado="Error en traduccion";
																	    }
																	    
																	    txtError = txtError + saltoLinea + resultado;  
																    }											    					 
																	}
																}											    					 
											    					  if (txtError == "") { 
											    						//document.encuesta.submit();
											    						//alert("Está comentado el submit de la función, por eso no se envia");
											    						valor=true;
											    																	    						
											    						 } else {
											    							 
											    						 //alert(respuestaErrores+" "+ txtError);
											    							
											    						 valor=false;
											    						 } 
											    					  
					 													//alert("error: "+txtError+", max: "+maxim+", min: "+minim+", Pregunta: "+idPregunta+", Traduce: "+traducPregunta+", tituloPregunta: "+titPregunta+", Multirespuesta: "+preguntaMultiresp);					 																	 													
																}
																 /*]]>*/
															</script>
																	
																</div>
																<div th:replace="encuesta/encuestaparseada :: botonEnvio"
																th:remove="tag"></div>
										</div>
									</div>			
									<div th:unless="'S'==${pregunta.multiresp}" th:remove="tag">
										<div th:if="(${min}==1)" th:remove="tag">										
											<div th:with="obligatoriedad=#{encuesta.obligatoria}"
												th:remove="tag">
												<div th:replace="encuesta/encuestaparseada :: botonEnvio"
													th:remove="tag"></div>
											</div>
										</div>
										<div th:unless="(${min}==1)" th:remove="tag">												
											<div th:replace="encuesta/encuestaparseada :: botonEnvio"
												th:remove="tag"></div>
										</div>
									</div>
									</div>
								</div>
							</div>
						</div>						
					</div>
				</div>
				<!-- TEST BOTONES FIN -->	
			</form>
			<div th:if="${MVS_encuesta.mostrar.equalsIgnoreCase('S')}"
				th:remove="tag">
				<p style="text-align: center;">
					<a href="resultadosencuesta.html"
						th:href="@{${#gusuri.resultadosencuesta(MVS_microsite,MVS_idioma,MVS_encuesta)}}"
						th:text="#{encuesta.verresultados}"> Ver resultados</a>
				</p>
			</div>
		</div>
		<div
			th:unless="(${MVS_encuesta.visible}=='S') and (${MVS_Fechas_vigente}==true)"
			th:remove="tag">
			<!-- encuesta no visible o caducada-->
			<div id="enquestaPreguntaCom">
				<div th:each="encuestaTraduccion : ${MVS_encuesta.traducciones}"
					th:remove="tag">
					<h3
						th:text="(${encuestaTraduccion.key}!=null) ? (${encuestaTraduccion.value.titulo} : '&nbsp;'"
						th:remove="(${encuestaTraduccion.value.titulo}!=null) ? 'none' : 'all'"></h3>
					<p style="text-align: center;" th:text="#{encuesta.caducada}">Encuesta
						caducada</p>
					<p style="text-align: center;">
						<a href="resultadosencuesta.html"
							th:href="@{${#gusuri.resultadosencuesta(MVS_microsite,MVS_idioma,MVS_encuesta)}}"
							th:text="#{encuesta.verresultados}"> Ver resultados</a>
					</p>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
