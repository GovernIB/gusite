<!DOCTYPE html>
<!--
Descripción: 
Este código muestra el listado de noticias organizadas por año.

Variables: 
	MVS_micrositetitulo: devuelve el titulo del microsite en cuestión
	MVS_tipolistado: devuelve el tipo de listado que mostrará
	MVS_microsite: devuelve un microsite a partir de su clave unica 
	MVS_parametros_pagina: devuelve un listado de parametros de un Map<String, Integer>
	MVS_listado: devuelve un listado de elementos de una colección
	
Objetos:
	#gusuri.archivopub(MVS_microsite,i.imagen): devuelve la URL hacia el archivo en cuestión
	#gusuri.noticia(MVS_microsite,MVS_idioma,i): devuelve la URL hacia la noticia en cuestión
	-->
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:gus="http://www.caib.es/thymeleaf/gusite"
	gus:decorator="layout">
<head>
<!-- MVS_micrositetitulo: devuelve el titulo del microsite en cuestión
	MVS_tipolistado: devuelve el tipo de listado que mostrará -->
<title
	th:text="${MVS_micrositetitulo}+ ' - ' + ${MVS_tipolistado}">Microsite
	título - tipo listado</title>	
<!--  Este .css se usa para que en estático aparezca lo más parecido posible a la versión dinámica.
Al ejecutarse dinámicamente, se eliminará automáticamente el .css -->
<link rel="stylesheet" type="text/css" media="all"
	href="../resources/css/estils.css" th:href="@{../resources/css/estils.css}" th:remove="all"></link>	
<!-- Parte añadida para usar el layout decorator "<section>"-->
<section th:remove="tag" layout:fragment="cssExtra">
<!-- css específico para esta página -->
<link rel="stylesheet" type="text/css" media="all"
	href="resources/css/estilsListarNoticias.css"
	th:href="@{/resources/css/estilsListarNoticias.css}"></link>
</section>
</head>
<body>
	<!-- Parte añadida para usar el layout decorator "<section>"-->
	<section th:remove="tag" layout:fragment="campanya">
		<div gus:replace="general/inc_llistats_campana_menu :: campanaMenu">Listado
			campana Menu</div>
	</section>
	<!-- Parte añadida para usar el layout decorator "<section>"-->
	<!-- Parte añadida para usar el layout decorator "<section>"-->
	<section th:remove="tag" layout:fragment="content">
	<div class="col-md-12 column" th:remove="tag">
		<!-- MVS_microsite: devuelve un microsite a partir de su clave unica -->
		<div th:id="(${MVS_microsite.tipomenu}=='0')==true ? 'infoNoMenu':'info'"
			id="" class="contenedorNoticiasListadas">
		<div
			gus:replace="general/inc_llistats_capcelera_buscador :: capcelera_buscador">Listado
			cabecera buscador</div>
		<!-- MVS_parametros_pagina: devuelve un listado de parametros de un Map<String, Integer> -->
		<div th:if="${MVS_parametros_pagina.nreg}!=0" th:remove="tag">
			<div gus:replace="general/inc_llistats_info_cursor :: infoCursor">Listado
				info cursor</div>
			<div id="noticiesLlistat">
				<ul style="text-align: justify">
					<!-- MVS_listado: devuelve un listado de elementos de una colección -->
					<div th:each="i : ${MVS_listado}" th:remove="tag">
						<div th:if="${i.traduce.titulo}!=null" th:remove="tag">
							<li style="list-style: none;">
								<div th:if="${i.imagen} !=null" th:remove="tag">
									<!-- #gusuri.archivopub(MVS_microsite,i.imagen): devuelve la URL hacia el archivo en cuestión -->
									<img src="archivopub.html"
										th:src="@{${#gusuri.archivopub(MVS_microsite,i.imagen)}}"
										alt="" width="48" height="48" align="middle" />
								</div>
								<div th:if="${i.imagen} ==null" th:remove="tag">
									<img th:src="@{/resources/imgs/noticies/news.gif}" alt=""
										align="middle" />
								</div>
								<div
									th:with="anoPublicacion=${#strings.substring(i.fpublicacion,0,4)},mesPublicacion=${#strings.substring(i.fpublicacion,5,7)},diaPublicacion=${#strings.substring(i.fpublicacion,8,10)},publicacionFecha=${#calendars.create(anoPublicacion,mesPublicacion,diaPublicacion)},publicacion=${#calendars.format(publicacionFecha, 'dd/MM/yyyy')}"
									th:text="${publicacion}" th:remove="tag">Fecha
									publicación</div> 
								<span class="enllas">
								<!-- #gusuri.noticia(MVS_microsite,MVS_idioma,i): devuelve la URL hacia la noticia en cuestión -->
								 <a href="noticia.html"
									th:href="@{${#gusuri.noticia(MVS_microsite,MVS_idioma,i)}}"
									th:text="${i.traduce.titulo}"> traduce título</a>
							</span>
								<div th:if="${i.traduce.subtitulo} !=null" th:remove="tag">
									<span class="enllas"
										th:text="'[' + ${i.traduce.subtitulo} + ']'">[traduce
										subtitulo]</span>
								</div>
							</li>
						</div>
					</div>
				</ul>
			</div>
			<div gus:replace="general/inc_llistats_paginacio :: paginacio">Listado
				paginación</div>
		</div>
		</div>
		</div>
	</section>
	<!-- Parte añadida para usar el layout decorator "<section>"-->
</body>
</html>


